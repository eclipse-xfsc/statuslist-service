replicaCount: 1
name: status-list-service

image:
  repository: node-654e3bca7fbeeed18f81d7c7.ps-xaas.io/ocm-wstack
  name: status-list-service
  # -- Image tag
  # Uses .Chart.AppVersion if empty
  tag: "main"
  # -- Image sha, usually generated by the CI
  # Uses image.tag if empty
  sha: ""
  # -- Image pull policy
  pullPolicy: Always
  # -- Image pull secret when internal image is used
  pullSecrets: key

podAnnotations: {}

resources:
  requests:
    cpu: 25m
    memory: 64Mi
  limits:
    cpu: 150m
    memory: 128Mi


ingress:
  enabled: true
  annotations:
    nginx.ingress.kubernetes.io/configuration-snippet: |
      proxy_set_header X-DID did:web:{{ .Values.ingress.hostname }};
      proxy_set_header X-NAMESPACE tenant_space;
      proxy_set_header X-KEY test;
      proxy_set_header X-GROUP test;
      proxy_set_header X-HOST {{ .Values.ingress.hostname }};
      proxy_set_header X-TYPE StatusList2021;
    nginx.ingress.kubernetes.io/rewrite-target: /v1/tenants/tenant_space/status/$2
  hosts:
    - host: cloud-wallet.xfsc.dev
      paths:
        - path: /api/status(/|$)(.*)
          port: 8080
          pathType: ImplementationSpecific

  tls:
    - secretName: xfsc-wildcard
      hosts:
        - cloud-wallet.xfsc.dev


config:
  messaging:
    protocol: nats
    nats:
      url: nats://nats.nats.svc.cluster.local:4222
      timeoutInSec: 10s
      queueGroup: statuslistservice
  servingPort: 8083
  database:
    host: postgres-postgresql.postgres.svc.cluster.local
    secretName: statuslist-db-secret
    passwordKey: postgresql-password
    usernameKey: postgresql-username
    port: 5432
    db: app
    params: "sslmode:disable"

  creationTopic: status
  listSizeInBytes: 125000
  signerTopic: signer
  signerUrl: http://signer.default.svc.cluster.local:8080

postgresql:
  auth:
    username: user
    database: status

